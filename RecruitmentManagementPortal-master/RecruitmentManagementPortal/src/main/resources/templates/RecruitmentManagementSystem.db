CREATE SCHEMA `RMPortal` ;

CREATE TABLE `role` (
 `role_id` int(11) NOT NULL AUTO_INCREMENT,
 `role_name` varchar(45) DEFAULT NULL,
 PRIMARY KEY (`role_id`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=latin1;

CREATE TABLE `user` (
 `user_id` int(11) NOT NULL AUTO_INCREMENT,
 `first_name` varchar(45) DEFAULT NULL,
 `last_name` varchar(45) DEFAULT NULL,
 `created_at` varchar(45) DEFAULT NULL,
 `is_active` tinyint(1) DEFAULT '0',
 `last_login` varchar(45) DEFAULT NULL,
 `email` varchar(45) DEFAULT NULL,
 `password` varchar(100) DEFAULT NULL,
 `role_id` int(11) DEFAULT NULL,
 `department` varchar(45) DEFAULT NULL,
 `city` varchar(45) DEFAULT NULL,
 `country` varchar(45) DEFAULT NULL,
 `mobile` int(11) DEFAULT NULL,
 `address` varchar(45) DEFAULT NULL,
 `dob` varchar(45) DEFAULT NULL,
 `blood_group` varchar(45) DEFAULT NULL,
 `employee_id` varchar(10) DEFAULT NULL,
 `dept_id` int(11) NOT NULL DEFAULT '1',
 PRIMARY KEY (`user_id`),
 KEY `fk_user_1_idx` (`email`),
 KEY `fk_user_1_idx1` (`role_id`),
 KEY `fk_user_2_idx` (`dept_id`),
 CONSTRAINT `fk_user_1` FOREIGN KEY (`role_id`) REFERENCES `role` (`role_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=47 DEFAULT CHARSET=latin1;


CREATE TABLE `user_role` (
 `user_role_id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) NOT NULL,
 `role_id` int(11) NOT NULL,
 PRIMARY KEY (`user_role_id`),
 KEY `fk_user_role_1_idx` (`role_id`),
 KEY `fk_user_role_2_idx` (`user_id`),
 CONSTRAINT `fk_user_role_1` FOREIGN KEY (`role_id`) REFERENCES `role` (`role_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
 CONSTRAINT `fk_user_role_2` FOREIGN KEY (`user_id`) REFERENCES `user` (`user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE `user_token` (
 `user_token_id` int(11) NOT NULL AUTO_INCREMENT,
 `user_token` varchar(45) DEFAULT NULL,
 `user_id` int(11) DEFAULT NULL,
 `token_type` varchar(45) DEFAULT NULL,
 PRIMARY KEY (`user_token_id`),
 KEY `user_id_idx` (`user_id`),
 CONSTRAINT `user_id` FOREIGN KEY (`user_id`) REFERENCES `user` (`user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=33 DEFAULT CHARSET=latin1;

CREATE TABLE `permission` (
 `permission_id` int(11) NOT NULL AUTO_INCREMENT,
 `permission_name` varchar(45) DEFAULT NULL,
 PRIMARY KEY (`permission_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE `permission_role` (
 `role_permission_id` int(11) NOT NULL AUTO_INCREMENT,
 `role_id` int(11) NOT NULL,
 `permission_id` int(11) NOT NULL,
 PRIMARY KEY (`role_permission_id`),
 KEY `fk_role_permission_1_idx` (`permission_id`),
 KEY `fk_role_permission_2_idx` (`role_id`),
 CONSTRAINT `fk_role_permission_1` FOREIGN KEY (`permission_id`) REFERENCES `permission` (`permission_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
 CONSTRAINT `fk_role_permission_2` FOREIGN KEY (`role_id`) REFERENCES `role` (`role_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE `department` (
 `dept_id` int(11) NOT NULL AUTO_INCREMENT,
 `dept_name` varchar(45) DEFAULT NULL,
 PRIMARY KEY (`dept_id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=latin1;

CREATE TABLE `job_vacancy` (
 `job_vacancy_id` int(11) NOT NULL AUTO_INCREMENT,
 `job_title` varchar(70) NOT NULL,
 `number_of_openings` int(11) NOT NULL,
 `experience_required` varchar(50) NOT NULL,
 `job_description` varchar(500) DEFAULT NULL,
 `technical_skills` varchar(500) NOT NULL,
 `job_location` varchar(500) NOT NULL,
 `salary_ctc` varchar(100) DEFAULT 'Not disclosed',
 `education` varchar(500) NOT NULL,
 `job_type` varchar(50) NOT NULL,
 PRIMARY KEY (`job_vacancy_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;


CREATE TABLE `employee_referal` (
  `referal_id` int(11) NOT NULL AUTO_INCREMENT,
  `applicant_name` varchar(255) DEFAULT NULL,
  `experience` varchar(255) DEFAULT NULL,
  `technical_skill` varchar(500) DEFAULT NULL,
  `referance_email` varchar(255) DEFAULT NULL,
  `referance_user_id` int(11) DEFAULT NULL,
  `resume` longblob,
  `application_status` varchar(255) DEFAULT NULL,
  `job_id` int(11) DEFAULT NULL,
  `bonous_status` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`referal_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE `RMPortal`.`referral_status` (
  `referral_id` INT NOT NULL AUTO_INCREMENT,
  `referral_status` VARCHAR(45) NULL,
  PRIMARY KEY (`referral_id`));
  
INSERT INTO `RMPortal`.`referral_status` (`referral_id`, `referral_status`) VALUES ('1', 'In Process');
INSERT INTO `RMPortal`.`referral_status` (`referral_id`, `referral_status`) VALUES ('2', 'Screening');
INSERT INTO `RMPortal`.`referral_status` (`referral_id`, `referral_status`) VALUES ('3', 'Technical Round');
INSERT INTO `RMPortal`.`referral_status` (`referral_id`, `referral_status`) VALUES ('4', 'Machine Round');
INSERT INTO `RMPortal`.`referral_status` (`referral_id`, `referral_status`) VALUES ('5', 'HR Round');
INSERT INTO `RMPortal`.`referral_status` (`referral_id`, `referral_status`) VALUES ('6', 'Selected');
INSERT INTO `RMPortal`.`referral_status` (`referral_id`, `referral_status`) VALUES ('7', 'Rejected');
  
CREATE TABLE `RMPortal`.`employee_bonus` (
  `range_id` INT NOT NULL AUTO_INCREMENT,
  `employee_name` VARCHAR(45) NOT NULL,
  `from` INT NULL DEFAULT 0,
  `to` INT NULL DEFAULT 1,
  `bonus_amount` DOUBLE NOT NULL,
  PRIMARY KEY (`range_id`));
  
INSERT INTO `RMPortal`.`employee_bonus` (`range_id`, `from`, `to`, `bonus_amount`) VALUES ('1', '0', '2', '0.0');
INSERT INTO `RMPortal`.`employee_bonus` (`range_id`, `from`, `to`, `bonus_amount`) VALUES ('2', '2', '5', '10000');
INSERT INTO `RMPortal`.`employee_bonus` (`range_id`, `from`, `to`, `bonus_amount`) VALUES ('3', '5', '15', '15000');
 
 
INSERT INTO `RMPortal`.`permission` (`permission_id`, `permission_name`) VALUES ('1', 'AddOpenPosition');
INSERT INTO `RMPortal`.`permission` (`permission_id`, `permission_name`) VALUES ('2', 'UpdateOpenPosition');
INSERT INTO `RMPortal`.`permission` (`permission_id`, `permission_name`) VALUES ('3', 'ViewOpenPosition');
INSERT INTO `RMPortal`.`permission` (`permission_id`, `permission_name`) VALUES ('4', 'ChangeApplicationStatus');
INSERT INTO `RMPortal`.`permission` (`permission_id`, `permission_name`) VALUES ('5', 'DeactivateUser');
INSERT INTO `RMPortal`.`permission` (`permission_id`, `permission_name`) VALUES ('6', 'AssignRole');
INSERT INTO `RMPortal`.`permission` (`permission_id`, `permission_name`) VALUES ('7', 'ViewResumeStatus');
INSERT INTO `RMPortal`.`permission` (`permission_id`, `permission_name`) VALUES ('8', 'ViewBonus');
INSERT INTO `RMPortal`.`permission` (`permission_id`, `permission_name`) VALUES ('9', 'AddReferral');
INSERT INTO `RMPortal`.`permission` (`permission_id`, `permission_name`) VALUES ('10', 'AddBonusDetails');
INSERT INTO `RMPortal`.`permission` (`permission_id`, `permission_name`) VALUES ('11', 'UpdateBonusDetails');

INSERT INTO `RMPortal`.`permission_role` (`role_permission_id`, `role_id`, `permission_id`) VALUES ('1', '1', '3');
INSERT INTO `RMPortal`.`permission_role` (`role_permission_id`, `role_id`, `permission_id`) VALUES ('2', '1', '7');
INSERT INTO `RMPortal`.`permission_role` (`role_permission_id`, `role_id`, `permission_id`) VALUES ('3', '1', '8');
INSERT INTO `RMPortal`.`permission_role` (`role_permission_id`, `role_id`, `permission_id`) VALUES ('4', '1', '9');
INSERT INTO `RMPortal`.`permission_role` (`role_permission_id`, `role_id`, `permission_id`) VALUES ('5', '2', '1');
INSERT INTO `RMPortal`.`permission_role` (`role_permission_id`, `role_id`, `permission_id`) VALUES ('6', '2', '2');
INSERT INTO `RMPortal`.`permission_role` (`role_permission_id`, `role_id`, `permission_id`) VALUES ('7', '2', '3');
INSERT INTO `RMPortal`.`permission_role` (`role_permission_id`, `role_id`, `permission_id`) VALUES ('8', '2', '4');
INSERT INTO `RMPortal`.`permission_role` (`role_permission_id`, `role_id`, `permission_id`) VALUES ('9', '2', '5');
INSERT INTO `RMPortal`.`permission_role` (`role_permission_id`, `role_id`, `permission_id`) VALUES ('10', '2', '6');
INSERT INTO `RMPortal`.`permission_role` (`role_permission_id`, `role_id`, `permission_id`) VALUES ('11', '2', '7');
INSERT INTO `RMPortal`.`permission_role` (`role_permission_id`, `role_id`, `permission_id`) VALUES ('12', '3', '1');
INSERT INTO `RMPortal`.`permission_role` (`role_permission_id`, `role_id`, `permission_id`) VALUES ('13', '3', '2');
INSERT INTO `RMPortal`.`permission_role` (`role_permission_id`, `role_id`, `permission_id`) VALUES ('14', '3', '4');
INSERT INTO `RMPortal`.`permission_role` (`role_permission_id`, `role_id`, `permission_id`) VALUES ('15', '3', '5');
INSERT INTO `RMPortal`.`permission_role` (`role_permission_id`, `role_id`, `permission_id`) VALUES ('16', '3', '8');
INSERT INTO `RMPortal`.`permission_role` (`role_permission_id`, `role_id`, `permission_id`) VALUES ('17', '3', '10');
INSERT INTO `RMPortal`.`permission_role` (`role_permission_id`, `role_id`, `permission_id`) VALUES ('18', '3', '11');
INSERT INTO `RMPortal`.`permission_role` (`role_permission_id`, `role_id`, `permission_id`) VALUES ('19', '2', '8');
INSERT INTO `RMPortal`.`permission_role` (`role_permission_id`, `role_id`, `permission_id`) VALUES ('20', '2', '9');

INSERT INTO `RMPortal`.`role` (`role_id`, `role_name`) VALUES ('1', 'END_USER');
INSERT INTO `RMPortal`.`role` (`role_id`, `role_name`) VALUES ('2', 'ADMIN');
INSERT INTO `RMPortal`.`role` (`role_id`, `role_name`) VALUES ('3', 'HR');

